{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport validateLogin from './validateLogin';\nimport { AuthContext } from '../Contexts/AuthorizationContext';\nimport axios from 'axios';\n\nconst useLogin = callback => {\n  _s();\n\n  const [values, setValues] = useState({\n    email: '',\n    password: ''\n  });\n  const {\n    loggedIn,\n    setLoggedIn\n  } = React.useContext(AuthContext);\n  const [errors, setErrors] = useState({});\n  const [isLogginIn, setIsLoggingIn] = useState(false);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setErrors(validateLogin(values)); //API Call\n\n    try {\n      axios.get(`http://localhost:5000/:${values.email}`).then(response => {\n        console.log(response);\n      });\n    } catch (error) {\n      console.log(\"Error trying to log in\");\n      console.log(error);\n    }\n\n    setIsLoggingIn(true);\n  };\n\n  useEffect(() => {\n    if (Object.keys(errors).length === 0 && isLogginIn) {\n      callback();\n      setLoggedIn(true);\n    }\n  }, [errors]);\n  return {\n    handleChange,\n    values,\n    handleSubmit,\n    errors\n  };\n};\n\n_s(useLogin, \"CtmvXfAQirtDX1oXHHMKCWbKg+U=\");\n\nexport default useLogin;","map":{"version":3,"sources":["/Users/michaelcristiano/Documents/GitHub/SOEN390_19/Client/src/Forms/useLogin.js"],"names":["React","useState","useEffect","validateLogin","AuthContext","axios","useLogin","callback","values","setValues","email","password","loggedIn","setLoggedIn","useContext","errors","setErrors","isLogginIn","setIsLoggingIn","handleChange","e","name","value","target","handleSubmit","preventDefault","get","then","response","console","log","error","Object","keys","length"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAAQC,WAAR,QAA0B,kCAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,QAAQ,GAAGC,QAAQ,IAAI;AAAA;;AACzB,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC;AACjCS,IAAAA,KAAK,EAAE,EAD0B;AAEjCC,IAAAA,QAAQ,EAAC;AAFwB,GAAD,CAApC;AAIA,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAA4Bb,KAAK,CAACc,UAAN,CAAiBV,WAAjB,CAAlC;AAEA,QAAM,CAACW,MAAD,EAASC,SAAT,IAAsBf,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACgB,UAAD,EAAaC,cAAb,IAA+BjB,QAAQ,CAAC,KAAD,CAA7C;;AAEA,QAAMkB,YAAY,GAAGC,CAAC,IAAI;AACtB,UAAK;AAACC,MAAAA,IAAD;AAAOC,MAAAA;AAAP,QAAgBF,CAAC,CAACG,MAAvB;AACAd,IAAAA,SAAS,CAAC,EACN,GAAGD,MADG;AAEN,OAACa,IAAD,GAAQC;AAFF,KAAD,CAAT;AAIH,GAND;;AAQA,QAAME,YAAY,GAAGJ,CAAC,IAAG;AACrBA,IAAAA,CAAC,CAACK,cAAF;AACAT,IAAAA,SAAS,CAACb,aAAa,CAACK,MAAD,CAAd,CAAT,CAFqB,CAGrB;;AACA,QAAG;AAECH,MAAAA,KAAK,CAACqB,GAAN,CAAW,0BAAyBlB,MAAM,CAACE,KAAM,EAAjD,EACCiB,IADD,CACOC,QAAD,IAAc;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACH,OAHD;AAKH,KAPD,CAOC,OAAMG,KAAN,EAAY;AACTF,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACH;;AACDb,IAAAA,cAAc,CAAC,IAAD,CAAd;AACH,GAhBD;;AAkBAhB,EAAAA,SAAS,CAAE,MAAM;AACb,QAAG8B,MAAM,CAACC,IAAP,CAAYlB,MAAZ,EAAoBmB,MAApB,KAA+B,CAA/B,IAAoCjB,UAAvC,EAAkD;AAC9CV,MAAAA,QAAQ;AACRM,MAAAA,WAAW,CAAC,IAAD,CAAX;AACH;AACJ,GALQ,EAKN,CAACE,MAAD,CALM,CAAT;AAOA,SAAO;AAACI,IAAAA,YAAD;AAAeX,IAAAA,MAAf;AAAuBgB,IAAAA,YAAvB;AAAqCT,IAAAA;AAArC,GAAP;AAEH,CA7CD;;GAAMT,Q;;AA+CN,eAAeA,QAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport validateLogin from './validateLogin'\nimport {AuthContext} from '../Contexts/AuthorizationContext'\nimport axios from 'axios'\n\nconst useLogin = callback => {\n    const [values, setValues] = useState({\n        email: '',\n        password:''\n    })\n    const { loggedIn, setLoggedIn } = React.useContext(AuthContext);\n\n    const [errors, setErrors] = useState({});\n    const [isLogginIn, setIsLoggingIn] = useState(false);\n\n    const handleChange = e => {\n        const{name, value} = e.target\n        setValues({\n            ...values,\n            [name]: value\n        })\n    }\n\n    const handleSubmit = e =>{\n        e.preventDefault();\n        setErrors(validateLogin(values))\n        //API Call\n        try{\n\n            axios.get(`http://localhost:5000/:${values.email}`)\n            .then((response) => {\n                console.log(response)\n            })\n\n        }catch(error){\n            console.log(\"Error trying to log in\")\n            console.log(error)\n        }\n        setIsLoggingIn(true)\n    }\n\n    useEffect( () => {\n        if(Object.keys(errors).length === 0 && isLogginIn){\n            callback()\n            setLoggedIn(true)\n        }\n    }, [errors])\n\n    return {handleChange, values, handleSubmit, errors}\n\n}\n\nexport default useLogin"]},"metadata":{},"sourceType":"module"}